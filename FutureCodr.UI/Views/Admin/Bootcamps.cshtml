@{
    ViewBag.Title = "Bootcamps";
}

<div class="admin-page" ng-app="bootcamps" ng-controller="BootcampsCtrl">
    <div class="admin-div">
        <div class="admin-header-div">
            <span class="admin-header">Bootcamps</span>
            <a href="#add-bootcamp"><button class="btn slim-btn admin-header-btn" ng-click="toggleShowAddBootcamp()">Add Bootcamp</button></a>
        </div>

        <table class="table admin-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Technology</th>
                    <th>Location</th>
                    <th>Price</th>
                    <th>Length</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="bootcamp in bootcamps">
                    <td>{{ bootcamp.Name }}</td>
                    <td>{{ bootcamp.Technology }}</td>
                    <td>{{ bootcamp.Location }}</td>
                    <td>{{ bootcamp.PriceString }}</td>
                    <td>{{ bootcamp.LengthInWeeks }}</td>
                    <td>
                        <i class="glyphicon glyphicon-pencil" ng-click="showEdit(bootcamp.BootcampID)"></i>
                        <i class="glyphicon glyphicon-trash" ng-click="delete(bootcamp.BootcampID)"></i>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <div id="add-bootcamp" class="admin-div" ng-show="showAddBootcamp">
        <div class="admin-header-div">
            <span class="admin-header">Add Bootcamp</span>
        </div>

        <form class="angular-form" name="form" novalidate>

            <div class="form-group">
                <span class="form-label-ang">Name</span>
                <input class="form-input-ang" name="Name" ng-model="bootcamp.Name" required />
                <span ng-show="form.Name.$dirty && form.Name.$invalid">
                    <span ng-show="form.Name.$error.required" class="ng-error-msg">Enter the bootcamp name</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">Primary Technology</span>
                <select ng-model="selectedTechnologyId" name="technology" class="default-dropdown ang-control" ng-options="technology.TechnologyId as technology.Name for technology in technologies" required></select>
                <span ng-show="form.technology.$dirty && form.technology.$invalid">
                    <span ng-show="form.technology.$error.required" class="ng-error-msg">Select a technology</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">Location</span>
                <select ng-model="selectedLocationId" name="location" class="default-dropdown ang-control" ng-options="location.LocationId as location.Name for location in locations" required></select>
                <span ng-show="form.location.$dirty && form.location.$invalid">
                    <span ng-show="form.location.$error.required" class="ng-error-msg">Select a location</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">Price</span>
                <input class="form-input-ang" name="Price" ng-model="bootcamp.Price" type="number" required />
                <span ng-show="form.Price.$dirty && form.Price.$invalid">
                    <span ng-show="form.Price.$error.required" class="ng-error-msg">Enter a price</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">Length (in weeks)</span>
                <input class="form-input-ang" name="LengthInWeeks" ng-model="bootcamp.LengthInWeeks" type="number" required />
                <span ng-show="form.LengthInWeeks.$dirty && form.LengthInWeeks.$invalid">
                    <span ng-show="form.LengthInWeeks.$error.required" class="ng-error-msg">Enter a length</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">URL</span>
                <input class="form-input-ang" name="Website" ng-model="bootcamp.Website" required />
                <span ng-show="form.Website.$dirty && form.Website.$invalid">
                    <span ng-show="form.Website.$error.required" class="ng-error-msg">Enter a website URL</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">Logo URL</span>
                <input class="form-input-ang" name="LogoLink" ng-model="bootcamp.LogoLink" required />
                <span ng-show="form.LogoLink.$dirty && form.LogoLink.$invalid">
                    <span ng-show="form.LogoLink.$error.required" class="ng-error-msg">Enter a link to the logo</span>
                </span>
            </div>
            
            <button class="btn slim-btn cancel-btn" ng-click="hide()">Cancel</button>
            <button class="btn slim-btn" ng-click="add()" ng-disabled="form.$invalid">Add</button>

        </form>
    </div>
    
    <div id="edit-bootcamp" class="admin-div" ng-show="showEditBootcamp">
        <div class="admin-header-div">
            <span class="admin-header">Edit Bootcamp</span>
        </div>

        <form class="angular-form" name="form" novalidate>

            <div class="form-group">
                <span class="form-label-ang">Name</span>
                <input class="form-input-ang" name="Name" ng-model="bootcamp.Name" required />
                <span ng-show="form.Name.$dirty && form.Name.$invalid">
                    <span ng-show="form.Name.$error.required" class="ng-error-msg">Enter the bootcamp name</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">Primary Technology</span>
                <select ng-model="selectedTechnologyId" name="technology" class="default-dropdown ang-control" ng-options="technology.TechnologyId as technology.Name for technology in technologies" required></select>
                <span ng-show="form.technology.$dirty && form.technology.$invalid">
                    <span ng-show="form.technology.$error.required" class="ng-error-msg">Select a technology</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">Location</span>
                <select ng-model="selectedLocationId" name="location" class="default-dropdown ang-control" ng-options="location.LocationId as location.Name for location in locations" required></select>
                <span ng-show="form.location.$dirty && form.location.$invalid">
                    <span ng-show="form.location.$error.required" class="ng-error-msg">Select a location</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">Price</span>
                <input class="form-input-ang" name="Price" ng-model="bootcamp.Price" type="number" required />
                <span ng-show="form.Price.$dirty && form.Price.$invalid">
                    <span ng-show="form.Price.$error.required" class="ng-error-msg">Enter a price</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">Length (in weeks)</span>
                <input class="form-input-ang" name="LengthInWeeks" ng-model="bootcamp.LengthInWeeks" type="number" required />
                <span ng-show="form.LengthInWeeks.$dirty && form.LengthInWeeks.$invalid">
                    <span ng-show="form.LengthInWeeks.$error.required" class="ng-error-msg">Enter a length</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">URL</span>
                <input class="form-input-ang" name="Website" ng-model="bootcamp.Website" required />
                <span ng-show="form.Website.$dirty && form.Website.$invalid">
                    <span ng-show="form.Website.$error.required" class="ng-error-msg">Enter a website URL</span>
                </span>
            </div>

            <div class="form-group">
                <span class="form-label-ang">Logo URL</span>
                <input class="form-input-ang" name="LogoLink" ng-model="bootcamp.LogoLink" required />
                <span ng-show="form.LogoLink.$dirty && form.LogoLink.$invalid">
                    <span ng-show="form.LogoLink.$error.required" class="ng-error-msg">Enter a link to the logo</span>
                </span>
            </div>
            
            <button class="btn slim-btn cancel-btn" ng-click="hide()">Cancel</button>
            <button class="btn slim-btn" ng-click="save()" ng-disabled="form.$invalid">Save</button>

        </form>
    </div>
</div>

@section AdminMenu
{
    @Html.Partial("_AdminFloater")
}

@section scripts{
    <script src="~/Scripts/angular.min.js"></script>
    <script src="~/Scripts/angular-route.min.js"></script>
    <script src="~/Scripts/angular/bootcamps/bootcampsModule.js"></script>
    <script src="~/Scripts/angular/bootcamps/bootcampsFactory.js"></script>
    <script src="~/Scripts/angular/bootcamps/BootcampsCtrl.js"></script>
}